(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.element,n=window.wp.domReady;var o=t.n(n);const a=window.wp.data,i=JSON.parse('{"N":"<rect style=\\"display:block;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:6.62304;stroke-linecap:square;stroke-linejoin:round;stroke-opacity:1;paint-order:stroke fill markers\\" id=\\"rect69\\" width=\\"1700\\" height=\\"300\\" x=\\"-1100\\" y=\\"448.21094\\"></rect>"}'),r="wapuugotchi/onboarding";!function(){const t=(0,a.createReduxStore)(r,{reducer(t={},{type:e,payload:n}){switch(e){case"__SET_STATE":return{state:t,...n};case"__SET_AVATAR":return{...t,avatar:n};case"__SET_INDEX":return{...t,index:n};case"__SET_ANIMATED":return{...t,animated:n}}return t},actions:{__initialize:t=>async function({dispatch:e,select:n}){e.__setState(t),e.setAvatar(n.getAvatar())},__setState:t=>({type:"__SET_STATE",payload:t}),setAvatar:t=>async function({dispatch:e}){const n=await async function(t){const e=function(t){return(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg")}(t);return function(t){const e=t.querySelector("g#wapuugotchi_type__wapuu, g#wapuugotchi_type__bear");e?.insertBefore(function(){const t=document.createElement("g");return t.id="Onboarding--group",t.innerHTML=i.N,t}(),t.querySelector("g#LeftArm--group"))}(e),function(t){["style","g#Front--group g","g#RightHand--group g","g#BeforeRightHand--part g","g#BeforeLeftArm--part g","g#Ball--group"]?.forEach((e=>{t.querySelectorAll(e)?.forEach((t=>{t?.remove()}))}))}(e),e.innerHTML}(t);return e.__setAvatar(n)},__setAvatar:t=>({type:"__SET_AVATAR",payload:t}),setIndex:t=>({type:"__SET_INDEX",payload:t}),setAnimated:t=>({type:"__SET_ANIMATED",payload:t})},selectors:{__getState:t=>t,getAvatar:t=>t.avatar,getPageConfig:t=>t.page_config,getNextPage:t=>t.next_page,getIndex:t=>t.index,getAnimated:t=>t.animated},resolvers:{}});(0,a.register)(t)}();const s=window.ReactJSXRuntime;function c(){const{avatar:t}=(0,a.useSelect)((t=>({avatar:t(r).getAvatar()})));return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"700px",version:"1.1",viewBox:"-820 0 1000 770",dangerouslySetInnerHTML:{__html:t}})}function d(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{id:"wapuugotchi_onboarding__global_navigation"})})}function l(){const{index:t,pageConfig:n,nextPage:o}=(0,a.useSelect)((t=>({index:t(r).getIndex(),pageConfig:t(r).getPageConfig(),nextPage:t(r).getNextPage()})));(0,e.useEffect)((()=>{window.onkeyup=t=>{if(!0===i())switch(t.preventDefault(),t.stopPropagation(),t.key){case"ArrowRight":c();break;case"ArrowLeft":l();break;case"Escape":u();break;case" ":p()}}}));const i=()=>!0!==wp?.data?.select("core/edit-post")?.isFeatureActive("welcomeGuide");(()=>{const t=document.getElementById("wapuugotchi__avatar");if(!t)return!1;const e=setInterval((function(){t.style.opacity||(t.style.opacity=1),t.style.opacity>0?t.style.opacity-=.1:clearInterval(e)}),10)})();const c=()=>{const e=Object.keys(n),i=e?.indexOf(t.toString());if(i>=0&&e?.length>i){const t=e[i+1],s=document.querySelector("button.wapuugotchi_onboarding__navigation_next span");void 0!==n?.[t]?!1===s.classList.contains("disabled")&&(0,a.dispatch)(r).setIndex(t):"string"==typeof o?g(o):u()}},l=()=>{const e=Object.keys(n),o=e?.indexOf(t.toString());if(o>0){const t=e[o-1],i=document.querySelector("button.wapuugotchi_onboarding__navigation_last span");void 0!==n?.[t]&&!1===i.classList.contains("disabled")&&(0,a.dispatch)(r).setIndex(t)}},g=(t="")=>{if(!t)return!1;const e=window.location.href.substring(0,window.location.href.lastIndexOf("wp-admin")),n=new URL(e+"wp-admin/"+t);return n.searchParams.append("onboarding_mode","tour"),window.location=n.toString(),!0},u=()=>{const t=window.location.href.substring(0,window.location.href.lastIndexOf("wp-admin")),e=new URL(t+"wp-admin/");window.location=e.toString()},p=()=>{_()>1&&((0,a.dispatch)(r).setAnimated(!0),f())},_=()=>{let e=0;return Array.isArray(n?.[t]?.target_list)&&(e=n[t].target_list.length),e},f=()=>{const e=document.querySelector(".wapuugotchi_onboarding__loader"),o=document.querySelector("button.wapuugotchi_onboarding__navigation_next span"),a=document.querySelector("button.wapuugotchi_onboarding__navigation_last span"),i=document.querySelector("button.wapuugotchi_onboarding__navigation_play");Number.isInteger(n?.[t]?.freeze)&&n?.[t]?.freeze>0&&(e.style.display="block",o.classList.add("disabled"),a.classList.add("disabled"),i.classList.add("invisible"),setTimeout((function(){e.style.display="none",o.classList.remove("disabled"),a.classList.remove("disabled"),i.classList.remove("invisible")}),n[t].freeze))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{id:"wapuugotchi_onboarding__navigation",children:[(0,s.jsx)("button",{className:"wapuugotchi_onboarding__navigation_stop",onClick:u,children:(0,s.jsx)("span",{className:"dashicons dashicons-no"})}),(0,s.jsx)("button",{className:"wapuugotchi_onboarding__navigation_last",onClick:l,children:(0,s.jsx)("span",{className:"dashicons dashicons-controls-back"+(0===(()=>{const e=Object.keys(n);return e?.indexOf(t?.toString())})()?" disabled":"")})}),(0,s.jsx)("button",{className:"wapuugotchi_onboarding__navigation_play",onClick:p,children:(0,s.jsx)("span",{className:"dashicons dashicons-controls-play"+(_()<=1?" disabled":"")})}),(0,s.jsx)("button",{className:"wapuugotchi_onboarding__navigation_next",onClick:c,children:(0,s.jsx)("span",{className:"dashicons dashicons-controls-forward"})}),(0,s.jsx)("div",{className:"wapuugotchi_onboarding__loader"}),(0,s.jsx)(d,{})]})})}function g(){const{index:t,pageConfig:e}=(0,a.useSelect)((t=>({index:t(r).getIndex(),pageConfig:t(r).getPageConfig()})));return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"wapuugotchi_onboarding__guide",children:[(0,s.jsx)(l,{}),(0,s.jsx)("div",{className:"wapuugotchi_onboarding__guide_text",children:(0,s.jsx)("p",{children:e?.[t]?.text})}),(0,s.jsx)(c,{})]})})}function u(){const{index:t,animated:n,pageConfig:o}=(0,a.useSelect)((t=>({index:t(r).getIndex(),pageConfig:t(r).getPageConfig(),animated:t(r).getAnimated()})));(0,e.useEffect)((()=>{const e=t=>{var e;const n=document.querySelector(".wapuugotchi_onboarding__focus"),o=document.querySelector(t.focus);n.style.clipPath=d(o),n.style.backgroundColor=null!==(e=t.color)&&void 0!==e?e:"#ffcc00";const a=document.querySelector(".wapuugotchi_onboarding__focus_overlay"),i=document.querySelector(t.overlay);a.style.clipPath=c(i);const r=document.querySelector(t.click);r instanceof HTMLElement&&(r?.classList?.add("wapuugotchi__allow_click"),r.click())};if(!0===n){if(Array.isArray(o?.[t]?.target_list)){let n=0;o[t].target_list.forEach((t=>{var o;!0===t.active&&(n+=parseInt(null!==(o=t.delay)&&void 0!==o?o:0,10),setTimeout((function(){e(t)}),n))}))}(0,a.dispatch)(r).setAnimated(!1)}else{const n=o?.[t]?.target_list?.[0];!0===n?.active&&e(n)}}),[t,n,o]),(0,e.useEffect)((()=>{i("click"),i("dblclick")}),[]);const i=t=>{document.querySelector("#wpwrap").addEventListener(t,(function(t){!1===t.target.classList.contains("wapuugotchi__allow_click")&&(t.target.classList.remove("wapuugotchi__allow_click"),t.preventDefault(),t.stopPropagation())}),!0)},c=t=>{let e=t?.getBoundingClientRect();if(e instanceof DOMRect==0){const t=document?.querySelector("#Onboarding--group")?.getBoundingClientRect();if(t instanceof DOMRect!=1)return"polygon(0 0, 0 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 100% 100%, 100% 0)";e=t}return`polygon(\n\t\t\t0 0,\n\t\t\t0 100%,\n\t\t\t${e.left}px 100%,\n\t\t\t${e.left}px ${e.top}px,\n\t\t\t${e.left+e.width}px ${e.top}px,\n\t\t\t${e.left+e.width}px ${e.top+e.height}px,\n\t\t\t${e.left}px ${e.top+e.height}px,\n\t\t\t0 100%,\n\t\t\t100% 100%,\n\t\t\t100% 0\n\t\t)`},d=(t,e=2)=>{let n=t?.getBoundingClientRect();if(n instanceof DOMRect==0){const t=document?.querySelector("#Onboarding--group")?.getBoundingClientRect();if(t instanceof DOMRect!=1)return"polygon(50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%)";n=t}return`polygon(\n\t\t\t${n.left}px ${n.top}px,\n\t\t\t${n.left}px ${n.top+n.height}px,\n\t\t\t${n.left+e}px ${n.top+n.height}px,\n\t\t\t${n.left+e}px ${n.top+e}px,\n\t\t\t${n.left+n.width-e}px ${n.top+e}px,\n\t\t\t${n.left+n.width-e}px ${n.top+n.height-e}px,\n\t\t\t${n.left}px ${n.top+n.height-e}px,\n\t\t\t${n.left}px ${n.top+n.height}px,\n\t\t\t${n.left+n.width}px ${n.top+n.height}px,\n\t\t\t${n.left+n.width}px ${n.top}px\n\t\t)`};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"wapuugotchi_onboarding__focus_overlay"}),(0,s.jsx)("div",{className:"wapuugotchi_onboarding__focus"})]})}function p(){const{index:t,pageConfig:e}=(0,a.useSelect)((t=>({index:t(r).getIndex(),pageConfig:t(r).getPageConfig()})));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{id:"wapuugotchi_onboarding__overlay",className:1===e?.[t]?.target_list?.[0]?.hover?"unlocked":"",children:(0,s.jsxs)("div",{className:"wapuugotchi_onboarding__dialog",children:[(0,s.jsx)(u,{}),(0,s.jsx)(g,{param:[]})]})})})}function _(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p,{})})}o()((()=>(0,e.createRoot)((()=>{let t=document.getElementById("wapuugotchi__onboarding");return t||(t=document.createElement("DIV"),t.id="wapuugotchi__onboarding",document.body.prepend(t)),t})()).render((0,s.jsx)(e.StrictMode,{children:(0,s.jsx)(_,{})}))))})();
(()=>{"use strict";var e={n:M=>{var t=M&&M.__esModule?()=>M.default:()=>M;return e.d(t,{a:t}),t},d:(M,t)=>{for(var N in t)e.o(t,N)&&!e.o(M,N)&&Object.defineProperty(M,N,{enumerable:!0,get:t[N]})},o:(e,M)=>Object.prototype.hasOwnProperty.call(e,M)};const M=window.wp.element,t=window.wp.domReady;var N=e.n(t);const s=window.wp.data,i=window.wp.apiFetch;var g=e.n(i);const D="wapuugotchi/mission";function c(e,M){for(let t=1;t<=M;t++){const M=e.querySelector(`#track_${t}`);M?.setAttribute("opacity","1")}return e}!function(){const e=(0,s.createReduxStore)(D,{reducer(e={},{type:M,payload:t}){switch(M){case"__SET_STATE":return{...e,...t};case"__SET_PROGRESS":return{...e,progress:t};case"__SET_MARKERS":return{...e,markers:t};case"__SET_MAP":return{...e,map:t};case"__SET_AJAX_URL":return{...e,ajaxurl:t};case"__SET_COMPLETED":return{...e,completed:t};default:return e}},actions:{__initialize:e=>async({dispatch:M})=>{M.__setState(e),M.setMap(e.map)},__setState:e=>({type:"__SET_STATE",payload:e}),setMap:e=>async({dispatch:M,select:t})=>{const N=function(e,M,t){let N=(new DOMParser).parseFromString(e,"image/svg+xml");return t?N=c(N,M):(N=function(e,M){const t=e.querySelector(`#mission_${M}`);return t?.classList.add("active"),e}(N,M+1),N=c(N,M+1)),N.querySelector("svg").innerHTML}(e,t.getProgress(),t.getLocked());M.__setMap(N)},__setMap:e=>({type:"__SET_MAP",payload:e}),setProgress:e=>({type:"__SET_PROGRESS",payload:e}),setAjaxUrl:e=>({type:"__SET_AJAX_URL",payload:e}),setCompleted:()=>async({dispatch:e,select:M})=>{g()({path:"wapuugotchi/v1/mission/set_completed",method:"POST",data:{nonce:M.getNonceList().wapuugotchi_mission}}).then((t=>{var N,s;"200"===t.status&&(e.__setCompleted(!0),e.setProgress(M.getProgress()+1),M.getProgress()===M.getMarkers()&&(N=M.getReward(),s=M.getNonceList().wapuugotchi_balance,g()({path:"wapuugotchi/v1/wapuugotchi/balance/raise_balance",method:"POST",data:{nonce:s,reward:N}})))}))},__setCompleted:e=>({type:"__SET_COMPLETED",payload:e})},selectors:{getProgress:e=>e.progress,getLocked:e=>e.locked,getMarkers:e=>e.markers,getReward:e=>e.reward,getDescription:e=>e.description,getMap:e=>e.map,getNonceList:e=>e.nonce_list,getCompleted:e=>e.completed}});(0,s.register)(e)}();const u=window.wp.primitives,j=window.ReactJSXRuntime;function o(){const{map:e,completed:t,progress:N}=(0,s.useSelect)((e=>({map:e(D).getMap(),completed:e(D).getCompleted(),progress:e(D).getProgress()}))),i=(0,M.useRef)(null);return(0,M.useEffect)((()=>{const e=i.current;if(!e)return;const M=e.querySelector("#mission_section");if(!M)return;const t=e=>{e.target.parentNode===M&&document.querySelector(".wapuugotchi_mission__overlay").classList.remove("hidden")};return e?.addEventListener("click",t),()=>{e?.removeEventListener("click",t)}}),[i]),(0,M.useEffect)((()=>{const e=i.current;if(!e)return;const M=e.querySelectorAll("#mission_section text"),s=e.querySelector("#mission_section text.active");for(let e=0;e<N;e++)M[e].textContent="✔",M[e].style.fill="#A9A9A9",M[e].style.opacity=.6,M[e].style.fontSize="35px";s?!0===t?(s.textContent="✔",s.style.fill="#009900",s.style.opacity=1,s.style.fontSize="50px",s.classList.add("completed")):(s.textContent="",s.style.fill="#009900",s.style.opacity=1,s.style.fontSize="50px"):M[N-1]&&(M[N-1].textContent="✔",M[N-1].style.fill="#009900",M[N-1].style.opacity=1,M[N-1].style.fontSize="50px")}),[t,N]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"wapuugotchi_missions__map",children:(0,j.jsx)(u.SVG,{ref:i,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 1207 298",dangerouslySetInnerHTML:{__html:e}})})})}window.React;const n="data:image/svg+xml;base64,PHN2ZwoJd2lkdGg9IjE3IgoJaGVpZ2h0PSIxMiIKCXZpZXdCb3g9IjAgMCAxNyAxMiIKCWZpbGw9Im5vbmUiCgl4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCj4KCTxwYXRoCgkJZD0iTTguODk2NDcgNC4yMzkyNkM2Ljc1OTcxIDQuMjM5MjYgNS4wMTYxMSA1Ljk4Mjg5IDUuMDE2MTEgOC4xMTk2MkM1LjAxNjExIDEwLjI1NjQgNi43NTk3NCAxMiA4Ljg5NjQ3IDEyQzExLjAzMzIgMTIgMTIuNzc2OCAxMC4yNTY0IDEyLjc3NjggOC4xMTk2MkMxMi43NzY4IDUuOTgyOTggMTEuMDMzMiA0LjIzOTI2IDguODk2NDcgNC4yMzkyNlpNMTAuNzQyNiA4LjY0OTU0QzEwLjQ1MjEgOC42NDk1NCAxMC4yMTI4IDguNDEwMjMgMTAuMjEyOCA4LjExOTY1QzEwLjIxMjggNy40MDE3IDkuNjE0NCA2LjgwMzM3IDguODk2NDcgNi44MDMzN0M4LjYwNTg5IDYuODAzMzcgOC4zNjY1OSA2LjU2NDA2IDguMzY2NTkgNi4yNzM0OUM4LjM2NjU5IDUuOTgyOSA4LjYwNTkgNS43NDM2IDguODk2NDcgNS43NDM2QzEwLjIxMjggNS43NDM2IDExLjI4OTYgNi44MjA1NiAxMS4yODk2IDguMTM2NzFDMTEuMjg5NiA4LjQxMDI1IDExLjA1MDMgOC42NDk1NyAxMC43NDI2IDguNjQ5NTdWOC42NDk1NFoiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cgk8cGF0aAoJCWQ9Ik02LjI0Njk4IDMuMTExMTFDNi4zMzI0NyAzLjMxNjIgNi41Mzc1NiAzLjQzNTkzIDYuNzQyNjQgMy40MzU5M0M2LjgxMDk3IDMuNDM1OTMgNi44Nzk0MSAzLjQxODg4IDYuOTQ3NzQgMy40MDE3MUM3LjIyMTI3IDMuMjgxOTkgNy4zNTgwMyAyLjk3NDM1IDcuMjM4MzIgMi43MDA4Mkw2LjcyNTQ3IDEuNDcwMDRDNi42MDU3NSAxLjE5NjUxIDYuMjk4MTIgMS4wNzY5MSA2LjAyNDU4IDEuMTc5NDZDNS43NTEwNSAxLjI5OTE3IDUuNjE0MjkgMS42MDY4MSA1LjczNCAxLjg4MDM1TDYuMjQ2OTggMy4xMTExMVoiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cgk8cGF0aAoJCWQ9Ik01LjI4OTY3IDMuNzQzNTVMMy45MjIxMSAyLjM3NTk5QzMuNzE3MDEgMi4xNzA4OSAzLjM3NTAzIDIuMTcwODkgMy4xNjk5NCAyLjM3NTk5QzIuOTY0ODQgMi41ODEwOCAyLjk2NDg0IDIuOTIzMDYgMy4xNjk5NCAzLjEyODE2TDQuNTM3NDkgNC40OTU3MkM0LjY0MDA0IDQuNTk4MjYgNC43NzY4MSA0LjY0OTU0IDQuOTEzNTYgNC42NDk1NEM1LjA1MDMyIDQuNjQ5NTQgNS4xODcxIDQuNTk4MjYgNS4yODk2MyA0LjQ5NTcyQzUuNDk0NzMgNC4yOTA2MiA1LjQ5NDc2IDMuOTY1ODMgNS4yODk2NyAzLjc0MzU1WiIKCQlmaWxsPSIjRkZGRkZGIgoJLz4KCTxwYXRoCgkJZD0iTTMuODg3ODMgNS40N0wyLjY1NzA2IDQuOTU3MTVDMi4zODM1MyA0LjgzNzQzIDIuMDc1ODkgNC45NzQyIDEuOTU2MTcgNS4yNDc3M0MxLjgzNjQ1IDUuNTIxMjYgMS45NzMyMiA1LjgyODkgMi4yNDY3NSA1Ljk0ODYyTDMuNDc3NTMgNi40NjE0N0MzLjU0NTg1IDYuNDk1NjkgMy42MTQzIDYuNDk1NjkgMy42ODI2MiA2LjQ5NTY5QzMuODg3NzIgNi40OTU2OSA0LjA5MjkxIDYuMzc1OTggNC4xNzgyOSA2LjE3MDg3QzQuMjgwOTYgNS44OTczNCA0LjE2MTI1IDUuNTcyNTMgMy44ODc4MyA1LjQ3WiIKCQlmaWxsPSIjRkZGRkZGIgoJLz4KCTxwYXRoCgkJZD0iTTMuNzg1MzYgOC4xMTk2MUMzLjc4NTM2IDcuODI5MDIgMy41NDYwNSA3LjU4OTcyIDMuMjU1NDcgNy41ODk3MkwxLjMwNjc0IDcuNTg5NkMxLjAxNjE2IDcuNTg5NiAwLjc3Njg1NSA3LjgyODkxIDAuNzc2ODU1IDguMTE5NDlDMC43NzY4NTUgOC40MTAwNiAxLjAxNjE3IDguNjQ5MzcgMS4zMDY3NCA4LjY0OTM3TDMuMjU1NDcgOC42NDk0OUMzLjU0NjA1IDguNjQ5NDkgMy43ODUzNiA4LjQxMDE4IDMuNzg1MzYgOC4xMTk2MVoiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cgk8cGF0aAoJCWQ9Ik0zLjQ3NzUyIDkuNzk0NzdMMi4yNDY3NSAxMC4zMDc2QzEuOTczMjEgMTAuNDI3MyAxLjgzNjQ2IDEwLjczNSAxLjk1NjE2IDExLjAwODVDMi4wNDE2NiAxMS4yMTM2IDIuMjQ2NzUgMTEuMzMzMyAyLjQ1MTgzIDExLjMzMzNDMi41MjAxNiAxMS4zMzMzIDIuNTg4NiAxMS4zMTYzIDIuNjU2OTIgMTEuMjk5MUwzLjg4NzcgMTAuNzg2M0M0LjE2MTIzIDEwLjY2NjUgNC4yOTc5OSAxMC4zNTg5IDQuMTc4MjggMTAuMDg1NEM0LjA1ODY5IDkuODExODQgMy43NTEwNiA5LjY3NTA3IDMuNDc3NTIgOS43OTQ3N1oiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cgk8cGF0aAoJCWQ9Ik0xNS41NDYgMTAuMjkwNkwxNC4zMTUzIDkuNzc3N0MxNC4wNDE3IDkuNjU3OTkgMTMuNzM0MSA5Ljc5NDc1IDEzLjYxNDQgMTAuMDY4M0MxMy40OTQ3IDEwLjM0MTggMTMuNjMxNCAxMC42NDk1IDEzLjkwNSAxMC43NjkyTDE1LjEzNTcgMTEuMjgyQzE1LjIwNDEgMTEuMzE2MyAxNS4yNzI1IDExLjMxNjMgMTUuMzQwOCAxMS4zMTYzQzE1LjU0NTkgMTEuMzE2MyAxNS43NTExIDExLjE5NjUgMTUuODM2NSAxMC45OTE0QzE1LjkzOTIgMTAuNzE3OSAxNS44MTk2IDEwLjQxMDMgMTUuNTQ2IDEwLjI5MDZaIgoJCWZpbGw9IiNGRkZGRkYiCgkvPgoJPHBhdGgKCQlkPSJNMTYuNDg2NCA3LjU4OTg0SDE0LjUzNzdDMTQuMjQ3MSA3LjU4OTg0IDE0LjAwNzggNy44MjkxNiAxNC4wMDc4IDguMTE5NzNDMTQuMDA3OCA4LjQxMDMxIDE0LjI0NzEgOC42NDk2MiAxNC41Mzc3IDguNjQ5NjJIMTYuNDY5NEMxNi43NTk5IDguNjQ5NjIgMTYuOTk5MyA4LjQxMDMxIDE2Ljk5OTMgOC4xMTk3M0MxNy4wMTYzIDcuODI5MjcgMTYuNzc3IDcuNTg5ODQgMTYuNDg2NCA3LjU4OTg0SDE2LjQ4NjRaIgoJCWZpbGw9IiNGRkZGRkYiCgkvPgoJPHBhdGgKCQlkPSJNMTMuNjE0NSA2LjE3MTAyQzEzLjcgNi4zNzYxMSAxMy45MDUxIDYuNDk1ODQgMTQuMTEwMiA2LjQ5NTg0QzE0LjE3ODUgNi40OTU4NCAxNC4yNDY5IDYuNDc4NzkgMTQuMzE1MyA2LjQ2MTYyTDE1LjU0NiA1Ljk0ODc2QzE1LjgxOTYgNS44MjkwNSAxNS45NTYzIDUuNTIxNDEgMTUuODM2NiA1LjI0Nzg3QzE1LjcxNjkgNC45NzQzNCAxNS40MDkzIDQuODU0NzQgMTUuMTM1NyA0Ljk1NzI5TDEzLjkwNSA1LjQ3MDE0QzEzLjYzMTcgNS41NzI2OSAxMy41MTIgNS44OTc0OCAxMy42MTQ1IDYuMTcxMDJaIgoJCWZpbGw9IiNGRkZGRkYiCgkvPgoJPHBhdGgKCQlkPSJNMTQuNjM5OCAyLjM3NTk5QzE0LjQzNDcgMi4xNzA4OSAxNC4wOTI3IDIuMTcwODkgMTMuODg3NiAyLjM3NTk5TDEyLjUyIDMuNzQzNTVDMTIuMzE0OSAzLjk0ODY0IDEyLjMxNDkgNC4yOTA2MiAxMi41MiA0LjQ5NTcyQzEyLjYyMjYgNC41OTgyNiAxMi43NTkzIDQuNjQ5NTQgMTIuODk2MSA0LjY0OTU0QzEzLjAzMjkgNC42NDk1NCAxMy4xNjk2IDQuNTk4MjYgMTMuMjcyMiA0LjQ5NTcyTDE0LjYzOTcgMy4xMjgxNkMxNC44NDQ4IDIuOTIyOTUgMTQuODQ0OSAyLjU4MTA5IDE0LjYzOTggMi4zNzU5OVoiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cgk8cGF0aAoJCWQ9Ik0xMC44NDUxIDMuNDAxODJDMTAuOTEzNCAzLjQzNjA0IDEwLjk4MTkgMy40MzYwNCAxMS4wNTAyIDMuNDM2MDRDMTEuMjU1MyAzLjQzNjA0IDExLjQ2MDUgMy4zMTYzMiAxMS41NDU5IDMuMTExMjJMMTIuMDU4NyAxLjg4MDQ1QzEyLjE3ODQgMS42MDY5MSAxMi4wNDE3IDEuMjk5MjggMTEuNzY4MSAxLjE3OTU2QzExLjQ5NDYgMS4wNTk4NCAxMS4xODcgMS4xOTY2MSAxMS4wNjcyIDEuNDcwMTRMMTAuNTU0NCAyLjcwMDkyQzEwLjQ1MiAyLjk3NDQ1IDEwLjU3MTYgMy4yODIyMiAxMC44NDUxIDMuNDAxODJaIgoJCWZpbGw9IiNGRkZGRkYiCgkvPgoJPHBhdGgKCQlkPSJNOC44OTY1OSAzLjAwODVDOS4xODcxNyAzLjAwODUgOS40MjY0NyAyLjc2OTE5IDkuNDI2NDcgMi40Nzg2MVYwLjUyOTg4N0M5LjQyNjQ3IDAuMjM5MzAyIDkuMTg3MTYgMCA4Ljg5NjU5IDBDOC42MDYwMSAwIDguMzY2NyAwLjIzOTMxMSA4LjM2NjcgMC41Mjk4ODdWMi40NjE1NUM4LjM2NjcgMi43NjkxOCA4LjYwNjAxIDMuMDA4NSA4Ljg5NjU5IDMuMDA4NVoiCgkJZmlsbD0iI0ZGRkZGRiIKCS8+Cjwvc3ZnPgo=";function r(){const{reward:e,progress:M,markers:t}=(0,s.useSelect)((e=>({reward:e(D).getReward(),progress:e(D).getProgress(),markers:e(D).getMarkers()}))),N=M===t;return(0,j.jsxs)("div",{className:"wapuugotchi_missions__pearls "+(N?"reward-transferred":""),children:["You will receive:",(0,j.jsxs)("span",{children:[e,(0,j.jsx)("img",{alt:"Pearl",src:n})]})]})}function T(){const{description:e}=(0,s.useSelect)((e=>({description:e(D).getDescription()})));return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"wapuugotchi_missions__description",children:[(0,j.jsxs)("div",{className:"wapuugotchi_missions__headline",children:[(0,j.jsx)("h1",{children:"Adventure"}),(0,j.jsx)(r,{})]}),(0,j.jsx)("p",{children:e})]})})}function a({completed:e,name:M}){const t="wapuugotchi_missions__step "+("true"===e?"completed":"");return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:t,children:[(0,j.jsx)("div",{className:"wapuugotchi_missions__step_name",children:M}),(0,j.jsx)("div",{className:"wapuugotchi_missions__step_bar"})]})})}const I=window.wp.i18n;function z(){const{progress:e,markers:M}=(0,s.useSelect)((e=>({progress:e(D).getProgress(),markers:e(D).getMarkers()})));function t(e){const M=["th","st","nd","rd"];return e+(M[e]||M[0])}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"wapuugotchi_missions__steps",children:((e,M)=>{const N=[];for(let s=1;s<=M;s++)N.push((0,j.jsx)(a,{completed:s<=e?"true":"false",current:s===e+1?"true":"false",name:(0,I.sprintf)(
// translators: %s: step number
// translators: %s: step number
(0,I.__)("%s clue","wapuugotchi"),t(s))},"wgm_count_"+s));return N})(e,M)}),(0,j.jsx)("span",{className:"wapuugotchi_missions__footer",children:(0,I.sprintf)(
// translators: %1$s: current step, %2$s: total steps.
// translators: %1$s: current step, %2$s: total steps.
(0,I.__)("Step %1$s of %2$s done, keep on going!","wapuugotchi"),e,M)})]})}const A=e=>{const M=document.getElementById("adminmenuback"),t=document.getElementById("wpadminbar");if(M&&t&&e){const N=M.offsetWidth,s=t.offsetHeight;e.style.top=`${s}px`,e.style.left=`${N}px`,e.style.bottom="0",e.style.right="0",e.style.position="fixed"}},x=e=>{const M=document.getElementById("adminmenuback"),t=document.getElementById("wpadminbar");if(M&&t){let N=t.offsetHeight,s=M.offsetWidth;const i=new ResizeObserver((()=>{const i=t.offsetHeight,g=M.offsetWidth;i===N&&g===s||(N=i,s=g,A(e))}));i.observe(M),i.observe(t);const g=new MutationObserver((()=>{A(e)}));return g.observe(M,{attributes:!0,childList:!0,subtree:!0}),g.observe(t,{attributes:!0,childList:!0,subtree:!0}),()=>{i.disconnect(),g.disconnect()}}};function y(){return(0,M.useEffect)((()=>{const e=e=>{e.target.classList.contains("wapuugotchi_mission__overlay")&&e.target.classList.add("hidden")},M=e=>{if("Escape"===e.key){const e=document.querySelector(".wapuugotchi_mission__overlay");e&&e.classList.add("hidden")}},t=document.querySelector(".wapuugotchi_mission__overlay");return A(t),x(t),t.addEventListener("click",e),document.addEventListener("keydown",M),()=>{t.removeEventListener("click",e),document.removeEventListener("keydown",M)}}),[]),(0,j.jsx)("div",{className:"wapuugotchi_mission__overlay hidden"})}function k(){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"wapuugotchi_missions__page",children:[(0,j.jsx)(o,{}),(0,j.jsx)(T,{}),(0,j.jsx)(z,{}),(0,j.jsx)(y,{})]})})}N()((()=>(0,M.createRoot)((()=>{let e=document.getElementById("wapuugotchi-submenu__mission");return e||(e=document.createElement("DIV"),e.id="wapuugotchi-submenu__mission",document.body.prepend(e)),e})()).render((0,j.jsx)(M.StrictMode,{children:(0,j.jsx)("div",{id:"wapuugotchi_missions",children:(0,j.jsx)(k,{})})}))))})();